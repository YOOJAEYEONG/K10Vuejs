<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>


     <!-- jQuery CDN -->
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

     <!-- Vuejs CDN 배포용 -->
     <script src="https://cdn.jsdelivr.net/npm/vue"></script>





<!--  
	시나리오] 다음의 단위 속성을 가진 상품객체를 JSON 배열로 정의한후
	쇼핑카트에 담긴 상품으로 처리하여 출력하세요.
	할인율을 선택 : 10%,20%,30%,50%
	단위 상품 속성 : 상품명, 가격, 갯수, 계, 할인여부, 할인후금액
	임의의 상품 3개를 카트에 추가 등록하고, 총비용 출력처리
-->

    <script>
        $(function () {
            var vue = new Vue({
                el : '#app',
                data : {
                    title : '[시나리오] v-for 사용한 장바구니',
                    discountSel : 0.1,
                    discount : {
                        '10%' : 0.1, '20%':0.2, '30%':0.3, '50%':0.5
                    },
                    products : [
                        {name:'사과',   price:3000, cnt:1, isDiscount:false},
                        {name:'배',     price:4000, cnt:2, isDiscount:true},
                        {name:'딸기',   price:5000, cnt:3, isDiscount:false}
                    ],
                    sum:0,
                    totalPrice:0
                }
            });
        });
    </script>
</head>
<body>
    <div id='app'>
        <h2>{{title}}</h2>
        할인율:
            <select v-model='discountSel'>
                <option v-for="(v, k) in discount" :value="v">
                    {{k}}
                </option>
            </select>
        <span v-show="false">{{totalPrice=0}}</span>
        <table border="1">
            <tr>
                <th>No</th>
                <th>상품명</th>
                <th>가격</th>
                <th>갯수</th>
                <th>계</th>
                <th>할인여부</th>
                <th>할인적용계</th>
            </tr>
            <tr v-for="(pdt, idx) in products">
                <td>{{idx+1}}</td>
                <td>{{pdt.name}}</td>
                <td>{{pdt.price}}</td>
                <td>{{pdt.cnt}}</td>
                <td>{{pdt.price*pdt.cnt}}</td>
                <td>
                    <input type="checkbox" v-model="pdt.isDiscount" 
                    :value="pdt.isDiscount">
                </td>
                <td>
                    {{
                        sum = (pdt.isDiscount === true) ?
                        ((pdt.price*pdt.cnt)-(pdt.price*pdt.cnt*discountSel))
                        :
                        (pdt.price*pdt.cnt)
                    }}
                    <span v-show="false">{{totalPrice += sum}}</span>
                </td>
            </tr>
            <tr>
                <td colspan="7" style="text-align: right;">
                    총합계금액: {{totalPrice}}
                </td>
            </tr>
        </table>
    </div>
</body>
</html>





















